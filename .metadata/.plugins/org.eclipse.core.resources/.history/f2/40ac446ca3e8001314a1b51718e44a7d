package com.example.android_022_imageswitchandgallery;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;

public class MainActivity extends Activity {
	Gallery mGallrey;
	List<Feed> mImgData;
	ImgViewAdapter imgAdapter;
	
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		//requestWindowFeature(Window.FEATURE_NO_TITLE);
		setContentView(R.layout.activity_main);
		
		mGallrey = (Gallery) findViewById(R.id.gallery);
		initImgData();
		imgAdapter = new ImgViewAdapter();
		mGallrey.setAdapter(imgAdapter);
		
		
	}
	
	public void initImgData(){
		mImgData = new ArrayList<Feed>();
		Feed img1 = new Feed(1,R.drawable.img_01);
		Feed img2 = new Feed(2,R.drawable.img_02);
		Feed img3 = new Feed(3,R.drawable.img_03);
		Feed img4 = new Feed(4,R.drawable.img_04);
		Feed img5 = new Feed(5,R.drawable.img_05);
		Feed img6 = new Feed(6,R.drawable.img_06);
		Feed img7 = new Feed(7,R.drawable.img_07);
		Feed img8 = new Feed(8,R.drawable.img_08);
		
		mImgData.add(img1);
		mImgData.add(img2);
		mImgData.add(img3);
		mImgData.add(img4);
		mImgData.add(img5);
		mImgData.add(img6);
		mImgData.add(img7);
		mImgData.add(img8);
	
	}
	
	class ImgViewAdapter extends BaseAdapter{

		@Override
		public int getCount() {
			// TODO Auto-generated method stub
			return mImgData.size();
		}

		@Override
		public Object getItem(int arg0) {
			// TODO Auto-generated method stub
			return mImgData.get(arg0);
		}

		@Override
		public long getItemId(int arg0) {
			// TODO Auto-generated method stub
			return mImgData.get(arg0).getId();
		}

		@Override
		public View getView(int arg0, View arg1, ViewGroup arg2) {
			// TODO Auto-generated method stub
			View view = arg1;
			ViewHolder vh = null;
			if(view == null){
				view = getLayoutInflater().inflate(R.layout.view_img_item, null);
				vh = new ViewHolder();
				vh.imgView = (ImageView) view.findViewById(R.id.iv_img);
				view.setTag(vh);
			}else{
				vh = (ViewHolder) view.getTag();
			}
			
			Feed img = mImgData.get(arg0);
			vh.imgView.setImageResource(img.getImgres());
			
			return view;
		}
		
		class ViewHolder{
			ImageView imgView;
		}
		
	}

	@Override
	public boolean onCreateOptionsMenu(Menu menu) {
		// Inflate the menu; this adds items to the action bar if it is present.
		getMenuInflater().inflate(R.menu.main, menu);
		return true;
	}

}
